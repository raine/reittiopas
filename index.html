<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  File: README
  
    &mdash; Reittiopas (0.1.0)
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '';
  framesUrl = "frames.html#!" + escape(window.location.href);
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><div id='filecontents'><h1>Reittiopas</h1>

<ul>
<li><a href="http://raneksi.github.com/reittiopas/">Documentation at Github</a></li>
<li><a href="http://raneksi.github.com/reittiopas/specdoc">Specifications</a></li>
</ul>

<h2>DESCRIPTION</h2>

<p>Reittiopas is a Ruby library for accessing the <a href="http://developer.reittiopas.fi/pages/fi/reittiopas-api.php">Reittiopas Developer API</a>.</p>

<p>Requires an account to the service that can be requested through <a href="http://developer.reittiopas.fi/pages/fi/accountrequest.php">the account request page</a>.</p>

<h2>SYNOPSIS</h2>

<pre class="code ruby"><code><span class='rubyid_require identifier id'>require</span> <span class='string val'>'reittiopas'</span>
<span class='rubyid_reittiopas identifier id'>reittiopas</span> <span class='assign token'>=</span> <span class='rubyid_Reittiopas constant id'>Reittiopas</span><span class='dot token'>.</span><span class='rubyid_new identifier id'>new</span><span class='lparen token'>(</span><span class='symbol val'>:username</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'myuser'</span><span class='comma token'>,</span> <span class='symbol val'>:password</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='string val'>'lolcats'</span><span class='rparen token'>)</span>
</code></pre>

<h4>Geocoding</h4>

<p>Search for location by keyword <em>tee</em>.</p>

<pre class="code ruby"><code><span class='rubyid_location identifier id'>location</span> <span class='assign token'>=</span> <span class='rubyid_reittiopas identifier id'>reittiopas</span><span class='dot token'>.</span><span class='rubyid_location identifier id'>location</span><span class='lparen token'>(</span><span class='string val'>'tee'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_first identifier id'>first</span>
<span class='rubyid_puts identifier id'>puts</span> <span class='dstring node'>&quot;#{location}, #{location.city}&quot;</span>
<span class='rubyid_puts identifier id'>puts</span> <span class='dstring node'>&quot;http://maps.google.com/maps?q=#{URI.escape location.coordinates[:wgs]}&quot;</span>

<span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_Teeripuisto constant id'>Teeripuisto</span><span class='comma token'>,</span> <span class='rubyid_Helsinki constant id'>Helsinki</span>
<span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_http identifier id'>http</span><span class='symbol val'>:/</span><span class='regexp val'>/maps.google.com/</span><span class='rubyid_maps? fid id'>maps?</span><span class='rubyid_q identifier id'>q</span><span class='assign token'>=</span><span class='float val'>60.2528</span><span class='comma token'>,</span><span class='float val'>2025.02051</span>
</code></pre>

<h3>Reverse geocoding</h3>

<p>Search for a location by <a href="http://fi.wikipedia.org/wiki/Kartastokoordinaattij%C3%A4rjestelm%C3%A4">KKJ coordinates</a>.</p>

<pre class="code ruby"><code><span class='rubyid_location identifier id'>location</span> <span class='assign token'>=</span> <span class='rubyid_reittiopas identifier id'>reittiopas</span><span class='dot token'>.</span><span class='rubyid_location identifier id'>location</span><span class='lparen token'>(</span><span class='symbol val'>:x</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>2546445</span><span class='comma token'>,</span> <span class='symbol val'>:y</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>6675512</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_first identifier id'>first</span>
<span class='rubyid_puts identifier id'>puts</span> <span class='dstring node'>&quot;#{location}, #{location.city}&quot;</span>

<span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='rubyid_Otakaari constant id'>Otakaari</span> <span class='integer val'>9</span><span class='comma token'>,</span> <span class='rubyid_Espoo constant id'>Espoo</span>
</code></pre>

<h3>Routing</h3>

<p>Search for routes between two locations: show 3 routes and do not use metro.</p>

<pre class="code ruby"><code><span class='rubyid_from identifier id'>from</span> <span class='assign token'>=</span> <span class='rubyid_reittiopas identifier id'>reittiopas</span><span class='dot token'>.</span><span class='rubyid_locations identifier id'>locations</span><span class='lparen token'>(</span><span class='string val'>'mannerheimintie 5'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_first identifier id'>first</span>
<span class='rubyid_to identifier id'>to</span>   <span class='assign token'>=</span> <span class='rubyid_reittiopas identifier id'>reittiopas</span><span class='dot token'>.</span><span class='rubyid_location identifier id'>location</span><span class='lparen token'>(</span><span class='string val'>'kallion kirjasto'</span><span class='rparen token'>)</span><span class='dot token'>.</span><span class='rubyid_first identifier id'>first</span>

<span class='rubyid_routes identifier id'>routes</span> <span class='assign token'>=</span> <span class='rubyid_reittiopas identifier id'>reittiopas</span><span class='dot token'>.</span><span class='rubyid_routing identifier id'>routing</span><span class='lparen token'>(</span><span class='rubyid_from identifier id'>from</span><span class='comma token'>,</span> <span class='rubyid_to identifier id'>to</span><span class='comma token'>,</span> <span class='lbrace token'>{</span><span class='string val'>&quot;show&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>3</span><span class='comma token'>,</span> <span class='string val'>&quot;use_metro&quot;</span> <span class='assign token'>=</span><span class='gt op'>&gt;</span> <span class='integer val'>0</span><span class='rbrace token'>}</span><span class='rparen token'>)</span>
<span class='rubyid_routes identifier id'>routes</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_route identifier id'>route</span><span class='bitor op'>|</span>
    <span class='rubyid_puts identifier id'>puts</span> <span class='dstring node'>&quot;#{route.distance} #{route.time}&quot;</span>
    <span class='rubyid_puts identifier id'>puts</span> <span class='string val'>&quot;Lines: &quot;</span>

    <span class='rubyid_route identifier id'>route</span><span class='dot token'>.</span><span class='rubyid_lines identifier id'>lines</span><span class='dot token'>.</span><span class='rubyid_each identifier id'>each</span> <span class='rubyid_do do kw'>do</span> <span class='bitor op'>|</span><span class='rubyid_line identifier id'>line</span><span class='bitor op'>|</span>
        <span class='rubyid_puts identifier id'>puts</span> <span class='dstring node'>&quot;#{line.code} starts from: #{line.stops.first.code}&quot;</span>
    <span class='rubyid_end end kw'>end</span>
<span class='rubyid_end end kw'>end</span>
</code></pre>

<p>Options for routing are passed to Reittiopas. See Reittiopas developer API for the possible options.</p>

<h2>INSTALLATION</h2>

<pre class="code ruby"><code><span class='rubyid_gem identifier id'>gem</span> <span class='rubyid_install identifier id'>install</span> <span class='rubyid_reittiopas identifier id'>reittiopas</span>
</code></pre>

<p>or to use latest upstream:</p>

<pre class="code ruby"><code><span class='rubyid_git identifier id'>git</span> <span class='rubyid_clone identifier id'>clone</span> <span class='rubyid_git identifier id'>git</span><span class='symbol val'>:/</span><span class='regexp val'>/github.com/</span><span class='rubyid_raneksi identifier id'>raneksi</span><span class='div op'>/</span><span class='rubyid_reittiopas identifier id'>reittiopas</span><span class='dot token'>.</span><span class='rubyid_git identifier id'>git</span>
<span class='rubyid_cd identifier id'>cd</span> <span class='rubyid_reittiopas identifier id'>reittiopas</span>
<span class='rubyid_rake identifier id'>rake</span> <span class='rubyid_newb identifier id'>newb</span>
<span class='rubyid_rake identifier id'>rake</span> <span class='rubyid_install_gem identifier id'>install_gem</span>
</code></pre>

<h2>REQUIREMENTS</h2>

<ul>
<li><a href="htttp://nokogiri.org">Nokogiri</a></li>
<li><a href="http://github.com/sporkmonger/addressable">Addressable</a></li>
</ul>

<h2>TODO</h2>

<ul>
<li>Support for determining the closest stop within radius</li>
</ul>

<h2>LICENSE</h2>

<p>(The MIT License)</p>

<p>Copyright (c) 2010 - 2011:</p>

<ul>
<li><a href="https://github.com/raneksi">Raine Virta</a></li>
<li><a href="https://github.com/matti">Matti Paksula</a></li>
</ul>

<p>Permission is hereby granted, free of charge, to any person obtaining
a copy of this software and associated documentation files (the
&#39;Software&#39;), to deal in the Software without restriction, including
without limitation the rights to use, copy, modify, merge, publish,
distribute, sublicense, and/or sell copies of the Software, and to
permit persons to whom the Software is furnished to do so, subject to
the following conditions:</p>

<p>The above copyright notice and this permission notice shall be
included in all copies or substantial portions of the Software.</p>

<p>THE SOFTWARE IS PROVIDED &#39;AS IS&#39;, WITHOUT WARRANTY OF ANY KIND,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</div></div>

    <div id="footer">
  Generated on Sun Aug 12 22:55:12 2012 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.2.1 (ruby-1.8.7).
</div>

  </body>
</html>